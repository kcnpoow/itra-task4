import{g as p,a as h,y as j,v as b,j as e,S as v,L as f}from"./index-CqsFpB6Z.js";import{u as N,F as S,a as i,b as o,c as r,M as L,d as P,A as y,e as F,f as A,L as q}from"./index-B6_XwKsv.js";import{u as w}from"./useMutation-hz0S0UZ7.js";import{B as E}from"./button-Clzs7NyT.js";import"./input-E3NZkcd6.js";const C=()=>{const d=p(),{formState:{errors:s},register:n,setError:m,handleSubmit:c}=N(),t=w({mutationFn:h.register,onSuccess:a=>{d.login(a),b.info("A verification link has been sent to your email")},onError:a=>{if(j.isAxiosError(a)){const{status:x,response:g}=a,l=g?.data.message;x===409?m("email",{message:l}):m("root",{message:l})}}}),u=async a=>{t.mutate(a)};return e.jsx("form",{onSubmit:c(u),children:e.jsxs(S,{children:[e.jsxs(i,{children:[e.jsx(o,{id:"first-name",label:"First name",autoComplete:"none",disabled:t.isPending,...n("firstName",{required:"First name is required",maxLength:{value:50,message:"First name must be at most 50 characters"},validate:a=>a.trim()!==""||"First name cannot be empty"})}),s.firstName?.message&&e.jsx(r,{className:"text-destructive",children:s.firstName.message})]}),e.jsxs(i,{children:[e.jsx(o,{id:"last-name",label:"Last name",autoComplete:"none",disabled:t.isPending,...n("lastName",{required:"Last name is required",maxLength:{value:50,message:"Last name must be at most 50 characters"},validate:a=>a.trim()!==""||"Last name cannot be empty"})}),s.lastName?.message&&e.jsx(r,{className:"text-destructive",children:s.lastName.message})]}),e.jsxs(i,{children:[e.jsx(o,{id:"position",label:"Position",autoComplete:"none",disabled:t.isPending,...n("position",{required:"Position is required",maxLength:{value:100,message:"Position must be at most 100 characters"},validate:a=>a.trim()!==""||"Position cannot be empty"})}),s.position?.message&&e.jsx(r,{className:"text-destructive",children:s.position.message})]}),e.jsxs(i,{children:[e.jsx(o,{id:"email",label:"E-mail",autoComplete:"none",disabled:t.isPending,addon:e.jsx(L,{}),...n("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email"}})}),s.email?.message&&e.jsx(r,{className:"text-destructive",children:s.email.message})]}),e.jsxs(i,{children:[e.jsx(P,{id:"password",label:"Password",disabled:t.isPending,...n("password",{required:"Password is required"})}),s.password?.message&&e.jsx(r,{className:"text-destructive",children:s.password.message})]}),s.root?.message&&e.jsx(y,{variant:"destructive",children:e.jsx(F,{className:"justify-center",children:s.root.message})}),e.jsx(i,{children:e.jsx(E,{size:"lg",disabled:t.isPending,children:t.isPending?e.jsx(v,{}):"Sign Up"})})]})})},k=()=>e.jsxs(A,{children:[e.jsx(q,{classname:"text-4xl"}),e.jsxs("div",{className:"max-w-xs mx-auto my-8 lg:my-24",children:[e.jsx("span",{className:"font-light",children:"Start your journey"}),e.jsx("h1",{className:"mb-10 text-2xl font-bold",children:"Sign Up"}),e.jsx(C,{})]}),e.jsxs("p",{className:"text-center",children:["Already have an account? ",e.jsx(f,{to:"/signin",children:"Sign in"})]})]}),U=k;export{U as component};
